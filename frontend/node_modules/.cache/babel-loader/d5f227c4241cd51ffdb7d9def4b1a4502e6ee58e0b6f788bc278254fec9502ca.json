{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ND/Desktop/Fixed_Project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ND/Desktop/Fixed_Project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport { defineComponent, ref, reactive, nextTick } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { User, Lock, View, Hide } from '@element-plus/icons-vue';\nexport default defineComponent({\n  name: 'Login',\n  components: {\n    User: User,\n    Lock: Lock,\n    View: View,\n    Hide: Hide\n  },\n  setup: function setup() {\n    var store = useStore();\n    var router = useRouter();\n    var route = useRoute();\n    var loginForm = reactive({\n      username: '',\n      password: ''\n    });\n    var loginRules = {\n      username: [{\n        required: true,\n        trigger: 'blur',\n        message: '请输入用户名'\n      }],\n      password: [{\n        required: true,\n        trigger: 'blur',\n        message: '请输入密码'\n      }]\n    };\n    var loading = ref(false);\n    var passwordType = ref('password');\n    var loginFormRef = ref(null);\n    var passwordRef = ref(null);\n    var showPwd = function showPwd() {\n      passwordType.value = passwordType.value === 'password' ? '' : 'password';\n      nextTick(function () {\n        passwordRef.value.focus();\n      });\n    };\n    var handleLogin = function handleLogin() {\n      loginFormRef.value.validate(/*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(valid) {\n          var redirect, _error$response;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (!valid) {\n                  _context.next = 17;\n                  break;\n                }\n                loading.value = true;\n                _context.prev = 2;\n                _context.next = 5;\n                return store.dispatch('user/login', loginForm);\n              case 5:\n                // 获取重定向地址，如果没有则默认到仪表盘\n                redirect = route.query.redirect || '/dashboard';\n                router.replace(redirect);\n                ElMessage.success('登录成功');\n                _context.next = 14;\n                break;\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](2);\n                console.error('Login failed:', _context.t0);\n                ElMessage.error(((_error$response = _context.t0.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || '登录失败');\n              case 14:\n                _context.prev = 14;\n                loading.value = false;\n                return _context.finish(14);\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[2, 10, 14, 17]]);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    };\n    return {\n      loginForm: loginForm,\n      loginRules: loginRules,\n      loading: loading,\n      passwordType: passwordType,\n      showPwd: showPwd,\n      handleLogin: handleLogin,\n      loginFormRef: loginFormRef,\n      passwordRef: passwordRef\n    };\n  }\n});","map":{"version":3,"names":["defineComponent","ref","reactive","nextTick","useStore","useRouter","useRoute","ElMessage","User","Lock","View","Hide","name","components","setup","store","router","route","loginForm","username","password","loginRules","required","trigger","message","loading","passwordType","loginFormRef","passwordRef","showPwd","value","focus","handleLogin","validate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","valid","redirect","_error$response","wrap","_callee$","_context","prev","next","dispatch","query","replace","success","t0","console","error","response","data","finish","stop","_x","apply","arguments"],"sources":["C:\\Users\\ND\\Desktop\\Fixed_Project\\frontend\\src\\views\\login\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <el-form\r\n      ref=\"loginForm\"\r\n      :model=\"loginForm\"\r\n      :rules=\"loginRules\"\r\n      class=\"login-form\"\r\n      autocomplete=\"on\"\r\n      label-position=\"left\"\r\n    >\r\n      <div class=\"title-container\">\r\n        <h3 class=\"title\">系统登录</h3>\r\n      </div>\r\n\r\n      <el-form-item prop=\"username\">\r\n        <span class=\"svg-container\">\r\n          <el-icon><User /></el-icon>\r\n        </span>\r\n        <el-input\r\n          ref=\"username\"\r\n          v-model=\"loginForm.username\"\r\n          placeholder=\"用户名\"\r\n          name=\"username\"\r\n          type=\"text\"\r\n          tabindex=\"1\"\r\n          autocomplete=\"on\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"password\">\r\n        <span class=\"svg-container\">\r\n          <el-icon><Lock /></el-icon>\r\n        </span>\r\n        <el-input\r\n          :key=\"passwordType\"\r\n          ref=\"passwordRef\"\r\n          v-model=\"loginForm.password\"\r\n          :type=\"passwordType\"\r\n          placeholder=\"密码\"\r\n          name=\"password\"\r\n          tabindex=\"2\"\r\n          autocomplete=\"on\"\r\n          @keyup.enter=\"handleLogin\"\r\n        />\r\n        <span class=\"show-pwd\" @click=\"showPwd\">\r\n          <el-icon>\r\n            <component :is=\"passwordType === 'password' ? 'Hide' : 'View'\" />\r\n          </el-icon>\r\n        </span>\r\n      </el-form-item>\r\n\r\n      <el-button\r\n        :loading=\"loading\"\r\n        type=\"primary\"\r\n        style=\"width: 100%; margin-bottom: 30px\"\r\n        @click.prevent=\"handleLogin\"\r\n      >\r\n        登录\r\n      </el-button>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, reactive, nextTick } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { User, Lock, View, Hide } from '@element-plus/icons-vue'\r\n\r\nexport default defineComponent({\r\n  name: 'Login',\r\n  components: { User, Lock, View, Hide },\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n\r\n    const loginForm = reactive({\r\n      username: '',\r\n      password: ''\r\n    })\r\n\r\n    const loginRules = {\r\n      username: [{ required: true, trigger: 'blur', message: '请输入用户名' }],\r\n      password: [{ required: true, trigger: 'blur', message: '请输入密码' }]\r\n    }\r\n\r\n    const loading = ref(false)\r\n    const passwordType = ref('password')\r\n    const loginFormRef = ref(null)\r\n    const passwordRef = ref(null)\r\n\r\n    const showPwd = () => {\r\n      passwordType.value = passwordType.value === 'password' ? '' : 'password'\r\n      nextTick(() => {\r\n        passwordRef.value.focus()\r\n      })\r\n    }\r\n\r\n    const handleLogin = () => {\r\n      loginFormRef.value.validate(async valid => {\r\n        if (valid) {\r\n          loading.value = true\r\n          try {\r\n            await store.dispatch('user/login', loginForm)\r\n            // 获取重定向地址，如果没有则默认到仪表盘\r\n            const redirect = route.query.redirect || '/dashboard'\r\n            router.replace(redirect)\r\n            ElMessage.success('登录成功')\r\n          } catch (error) {\r\n            console.error('Login failed:', error)\r\n            ElMessage.error(error.response?.data?.error || '登录失败')\r\n          } finally {\r\n            loading.value = false\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    return {\r\n      loginForm,\r\n      loginRules,\r\n      loading,\r\n      passwordType,\r\n      showPwd,\r\n      handleLogin,\r\n      loginFormRef,\r\n      passwordRef\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$bg: #2d3a4b;\r\n$dark_gray: #889aa4;\r\n$light_gray: #eee;\r\n\r\n.login-container {\r\n  min-height: 100%;\r\n  width: 100%;\r\n  background-color: $bg;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  .login-form {\r\n    position: relative;\r\n    width: 520px;\r\n    max-width: 100%;\r\n    padding: 160px 35px 0;\r\n    margin: 0 auto;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .title-container {\r\n    position: relative;\r\n\r\n    .title {\r\n      font-size: 26px;\r\n      color: $light_gray;\r\n      margin: 0 auto 40px auto;\r\n      text-align: center;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n\r\n  .svg-container {\r\n    padding: 6px 5px 6px 15px;\r\n    color: $dark_gray;\r\n    vertical-align: middle;\r\n    display: inline-block;\r\n  }\r\n\r\n  .show-pwd {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 7px;\r\n    font-size: 16px;\r\n    color: $dark_gray;\r\n    cursor: pointer;\r\n    user-select: none;\r\n  }\r\n\r\n  .el-form-item {\r\n    border: 1px solid rgba(255, 255, 255, 0.1);\r\n    background: rgba(0, 0, 0, 0.1);\r\n    border-radius: 5px;\r\n    color: #454545;\r\n  }\r\n\r\n  .el-input {\r\n    display: inline-block;\r\n    height: 47px;\r\n    width: 85%;\r\n\r\n    input {\r\n      background: transparent;\r\n      border: 0;\r\n      -webkit-appearance: none;\r\n      border-radius: 0;\r\n      padding: 12px 5px 12px 15px;\r\n      color: $light_gray;\r\n      height: 47px;\r\n      caret-color: $light_gray;\r\n\r\n      &:-webkit-autofill {\r\n        box-shadow: 0 0 0 1000px $bg inset !important;\r\n        -webkit-text-fill-color: $light_gray !important;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}