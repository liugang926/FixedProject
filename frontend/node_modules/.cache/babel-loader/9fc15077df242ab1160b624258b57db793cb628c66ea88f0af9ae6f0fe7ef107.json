{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nexport function usePermission() {\n  var store = useStore();\n  var roles = computed(function () {\n    return store.state.user.roles;\n  });\n  var permissions = computed(function () {\n    return store.state.user.permissions;\n  });\n  function hasPermission(permissionRoles) {\n    if (!permissionRoles || permissionRoles.length === 0) {\n      return true;\n    }\n\n    // 检查角色权限\n    var hasRole = roles.value.some(function (role) {\n      return permissionRoles.includes(role);\n    });\n    if (hasRole) return true;\n\n    // 检查具体权限\n    return permissions.value.some(function (permission) {\n      return permissionRoles.includes(permission);\n    });\n  }\n  function hasRole(roleList) {\n    if (!roleList || roleList.length === 0) {\n      return true;\n    }\n    return roles.value.some(function (role) {\n      return roleList.includes(role);\n    });\n  }\n  return {\n    hasPermission: hasPermission,\n    hasRole: hasRole,\n    roles: roles,\n    permissions: permissions\n  };\n}","map":{"version":3,"names":["computed","useStore","usePermission","store","roles","state","user","permissions","hasPermission","permissionRoles","length","hasRole","value","some","role","includes","permission","roleList"],"sources":["C:/Users/ND/Desktop/Fixed_Project/frontend/src/hooks/usePermission.js"],"sourcesContent":["import { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\n\r\nexport function usePermission() {\r\n  const store = useStore()\r\n  \r\n  const roles = computed(() => store.state.user.roles)\r\n  const permissions = computed(() => store.state.user.permissions)\r\n\r\n  function hasPermission(permissionRoles) {\r\n    if (!permissionRoles || permissionRoles.length === 0) {\r\n      return true\r\n    }\r\n\r\n    // 检查角色权限\r\n    const hasRole = roles.value.some(role => permissionRoles.includes(role))\r\n    if (hasRole) return true\r\n\r\n    // 检查具体权限\r\n    return permissions.value.some(permission => permissionRoles.includes(permission))\r\n  }\r\n\r\n  function hasRole(roleList) {\r\n    if (!roleList || roleList.length === 0) {\r\n      return true\r\n    }\r\n    return roles.value.some(role => roleList.includes(role))\r\n  }\r\n\r\n  return {\r\n    hasPermission,\r\n    hasRole,\r\n    roles,\r\n    permissions\r\n  }\r\n} "],"mappings":";;;;;;AAAA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,SAASC,QAAQ,QAAQ,MAAM;AAE/B,OAAO,SAASC,aAAaA,CAAA,EAAG;EAC9B,IAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;EAExB,IAAMG,KAAK,GAAGJ,QAAQ,CAAC;IAAA,OAAMG,KAAK,CAACE,KAAK,CAACC,IAAI,CAACF,KAAK;EAAA,EAAC;EACpD,IAAMG,WAAW,GAAGP,QAAQ,CAAC;IAAA,OAAMG,KAAK,CAACE,KAAK,CAACC,IAAI,CAACC,WAAW;EAAA,EAAC;EAEhE,SAASC,aAAaA,CAACC,eAAe,EAAE;IACtC,IAAI,CAACA,eAAe,IAAIA,eAAe,CAACC,MAAM,KAAK,CAAC,EAAE;MACpD,OAAO,IAAI;IACb;;IAEA;IACA,IAAMC,OAAO,GAAGP,KAAK,CAACQ,KAAK,CAACC,IAAI,CAAC,UAAAC,IAAI;MAAA,OAAIL,eAAe,CAACM,QAAQ,CAACD,IAAI,CAAC;IAAA,EAAC;IACxE,IAAIH,OAAO,EAAE,OAAO,IAAI;;IAExB;IACA,OAAOJ,WAAW,CAACK,KAAK,CAACC,IAAI,CAAC,UAAAG,UAAU;MAAA,OAAIP,eAAe,CAACM,QAAQ,CAACC,UAAU,CAAC;IAAA,EAAC;EACnF;EAEA,SAASL,OAAOA,CAACM,QAAQ,EAAE;IACzB,IAAI,CAACA,QAAQ,IAAIA,QAAQ,CAACP,MAAM,KAAK,CAAC,EAAE;MACtC,OAAO,IAAI;IACb;IACA,OAAON,KAAK,CAACQ,KAAK,CAACC,IAAI,CAAC,UAAAC,IAAI;MAAA,OAAIG,QAAQ,CAACF,QAAQ,CAACD,IAAI,CAAC;IAAA,EAAC;EAC1D;EAEA,OAAO;IACLN,aAAa,EAAbA,aAAa;IACbG,OAAO,EAAPA,OAAO;IACPP,KAAK,EAALA,KAAK;IACLG,WAAW,EAAXA;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}