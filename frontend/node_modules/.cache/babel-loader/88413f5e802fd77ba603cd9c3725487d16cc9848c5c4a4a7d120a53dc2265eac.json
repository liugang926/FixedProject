{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport store from '@/store';\nfunction checkPermission(el, binding) {\n  var value = binding.value;\n  var roles = store.state.user.roles;\n  var permissions = store.state.user.permissions;\n  if (value && value instanceof Array) {\n    if (value.length > 0) {\n      var permissionRoles = value;\n      var hasPermission = roles.some(function (role) {\n        return permissionRoles.includes(role);\n      });\n\n      // 检查具体权限\n      var hasSpecificPermission = permissions.some(function (permission) {\n        return permissionRoles.includes(permission);\n      });\n      if (!hasPermission && !hasSpecificPermission) {\n        el.parentNode && el.parentNode.removeChild(el);\n      }\n    }\n  } else {\n    throw new Error(\"\\u9700\\u8981\\u6307\\u5B9A\\u6743\\u9650\\uFF0C\\u4F8B\\u5982 v-permission=\\\"['admin','edit_user']\\\"\");\n  }\n}\nexport default {\n  mounted: function mounted(el, binding) {\n    checkPermission(el, binding);\n  },\n  updated: function updated(el, binding) {\n    checkPermission(el, binding);\n  }\n};","map":{"version":3,"names":["store","checkPermission","el","binding","value","roles","state","user","permissions","Array","length","permissionRoles","hasPermission","some","role","includes","hasSpecificPermission","permission","parentNode","removeChild","Error","mounted","updated"],"sources":["C:/Users/ND/Desktop/Fixed_Project/frontend/src/directives/permission.js"],"sourcesContent":["import store from '@/store'\r\n\r\nfunction checkPermission(el, binding) {\r\n  const { value } = binding\r\n  const roles = store.state.user.roles\r\n  const permissions = store.state.user.permissions\r\n\r\n  if (value && value instanceof Array) {\r\n    if (value.length > 0) {\r\n      const permissionRoles = value\r\n      const hasPermission = roles.some(role => {\r\n        return permissionRoles.includes(role)\r\n      })\r\n\r\n      // 检查具体权限\r\n      const hasSpecificPermission = permissions.some(permission => {\r\n        return permissionRoles.includes(permission)\r\n      })\r\n\r\n      if (!hasPermission && !hasSpecificPermission) {\r\n        el.parentNode && el.parentNode.removeChild(el)\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error(`需要指定权限，例如 v-permission=\"['admin','edit_user']\"`)\r\n  }\r\n}\r\n\r\nexport default {\r\n  mounted(el, binding) {\r\n    checkPermission(el, binding)\r\n  },\r\n  updated(el, binding) {\r\n    checkPermission(el, binding)\r\n  }\r\n} "],"mappings":";;;;;;;;AAAA,OAAOA,KAAK,MAAM,SAAS;AAE3B,SAASC,eAAeA,CAACC,EAAE,EAAEC,OAAO,EAAE;EACpC,IAAQC,KAAK,GAAKD,OAAO,CAAjBC,KAAK;EACb,IAAMC,KAAK,GAAGL,KAAK,CAACM,KAAK,CAACC,IAAI,CAACF,KAAK;EACpC,IAAMG,WAAW,GAAGR,KAAK,CAACM,KAAK,CAACC,IAAI,CAACC,WAAW;EAEhD,IAAIJ,KAAK,IAAIA,KAAK,YAAYK,KAAK,EAAE;IACnC,IAAIL,KAAK,CAACM,MAAM,GAAG,CAAC,EAAE;MACpB,IAAMC,eAAe,GAAGP,KAAK;MAC7B,IAAMQ,aAAa,GAAGP,KAAK,CAACQ,IAAI,CAAC,UAAAC,IAAI,EAAI;QACvC,OAAOH,eAAe,CAACI,QAAQ,CAACD,IAAI,CAAC;MACvC,CAAC,CAAC;;MAEF;MACA,IAAME,qBAAqB,GAAGR,WAAW,CAACK,IAAI,CAAC,UAAAI,UAAU,EAAI;QAC3D,OAAON,eAAe,CAACI,QAAQ,CAACE,UAAU,CAAC;MAC7C,CAAC,CAAC;MAEF,IAAI,CAACL,aAAa,IAAI,CAACI,qBAAqB,EAAE;QAC5Cd,EAAE,CAACgB,UAAU,IAAIhB,EAAE,CAACgB,UAAU,CAACC,WAAW,CAACjB,EAAE,CAAC;MAChD;IACF;EACF,CAAC,MAAM;IACL,MAAM,IAAIkB,KAAK,gGAAiD,CAAC;EACnE;AACF;AAEA,eAAe;EACbC,OAAO,WAAPA,OAAOA,CAACnB,EAAE,EAAEC,OAAO,EAAE;IACnBF,eAAe,CAACC,EAAE,EAAEC,OAAO,CAAC;EAC9B,CAAC;EACDmB,OAAO,WAAPA,OAAOA,CAACpB,EAAE,EAAEC,OAAO,EAAE;IACnBF,eAAe,CAACC,EAAE,EAAEC,OAAO,CAAC;EAC9B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}